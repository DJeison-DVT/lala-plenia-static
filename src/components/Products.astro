---
import Productos1 from "../assets/products/Productos 1.png";
import Productos2 from "../assets/products/Productos 2.png";
import Productos3 from "../assets/products/Productos 3.png";
import Productos4 from "../assets/products/Productos 4.png";
import Productos5 from "../assets/products/Productos 5.png";
import Productos6 from "../assets/products/Productos 6.png";
import All from "../assets/products/Productos All.png";

import Logo from "../assets/products/Productos Hero.png";
import left from "../assets/products/Productos left.png";
import right from "../assets/products/Productos right.png";
---

<section class="container mx-auto py-16 px-4 relative z-20">
	<!-- Top Left Logo -->
	<div class="mb-8 flex justify-start relative z-50">
		<img
			src={Logo.src}
			alt="Product Logo"
			class="h-40 w-auto object-contain"
		/>
	</div>

	<!-- Carousel Container -->
	<div class="relative px-2 md:px-16">
		<!-- Controls (Buttons on side) -->
		<button
			id="prev-btn"
			class="absolute left-0 top-1/2 -translate-y-1/2 z-10 hover:scale-110 transition-transform cursor-pointer focus:outline-none"
			aria-label="Previous"
		>
			<img src={left.src} alt="Previous" />
		</button>
		<button
			id="next-btn"
			class="absolute right-0 top-1/2 -translate-y-1/2 z-10 hover:scale-110 transition-transform cursor-pointer focus:outline-none"
			aria-label="Next"
		>
			<img src={right.src} alt="Next" />
		</button>

		<!-- Viewport -->
		<div class="overflow-hidden">
			<!-- Track -->
			<div
				id="carousel-track"
				class="flex transition-transform duration-500 ease-out"
			>
				<!-- Page 1 -->
				<div class="min-w-full grid grid-cols-1 md:grid-cols-3 gap-6">
					<div class="w-full flex items-center justify-center">
						<img
							src={Productos1.src}
							alt="Producto 1"
							class="w-full h-auto object-contain"
						/>
					</div>
					<div class="w-full flex items-center justify-center">
						<img
							src={Productos2.src}
							alt="Producto 2"
							class="w-full h-auto object-contain"
						/>
					</div>
					<div class="w-full flex items-center justify-center">
						<img
							src={Productos3.src}
							alt="Producto 3"
							class="w-full h-auto object-contain"
						/>
					</div>
				</div>
				<!-- Page 2 -->
				<div class="min-w-full grid grid-cols-1 md:grid-cols-3 gap-6">
					<div class="w-full flex items-center justify-center">
						<img
							src={Productos4.src}
							alt="Producto 4"
							class="w-full h-auto object-contain"
						/>
					</div>
					<div class="w-full flex items-center justify-center">
						<img
							src={Productos5.src}
							alt="Producto 5"
							class="w-full h-auto object-contain"
						/>
					</div>
					<div class="w-full flex items-center justify-center">
						<img
							src={Productos6.src}
							alt="Producto 6"
							class="w-full h-auto object-contain"
						/>
					</div>
				</div>
				<!-- Page 3 -->
				<div class="min-w-full grid grid-cols-1 md:grid-cols-3 gap-6">
					<div class="hidden md:block"></div>
					<div class="w-full flex items-center justify-center">
						<img
							src={All.src}
							alt="Todos los productos"
							class="w-full h-auto object-contain"
						/>
					</div>
					<div class="hidden md:block"></div>
				</div>
			</div>
		</div>
	</div>

	<!-- Pagination Circles -->
	<div class="flex justify-center gap-3 mt-8">
		<button
			data-index="0"
			class="carousel-dot w-3 h-3 rounded-full border border-white bg-transparent transition-all focus:outline-none"
		></button>
		<button
			data-index="1"
			class="carousel-dot w-3 h-3 rounded-full border border-white bg-transparent transition-all focus:outline-none"
		></button>
		<button
			data-index="2"
			class="carousel-dot w-3 h-3 rounded-full border border-white bg-transparent transition-all focus:outline-none"
		></button>
	</div>
</section>

<script>
	const track = document.getElementById("carousel-track");
	const prevBtn = document.getElementById("prev-btn");
	const nextBtn = document.getElementById("next-btn");
	const dots = document.querySelectorAll(".carousel-dot");

	let currentIndex = 0;
	const totalSlides = 3;

	function updateCarousel() {
		if (!track) return;
		track.style.transform = `translateX(-${currentIndex * 100}%)`;

		dots.forEach((dot, index) => {
			if (index === currentIndex) {
				// Fill white if selected
				(dot as HTMLElement).style.backgroundColor = "white";
			} else {
				// Transparent if not selected (just border)
				(dot as HTMLElement).style.backgroundColor = "transparent";
			}
		});
	}

	if (prevBtn) {
		prevBtn.addEventListener("click", () => {
			currentIndex =
				currentIndex === 0 ? totalSlides - 1 : currentIndex - 1;
			updateCarousel();
		});
	}

	if (nextBtn) {
		nextBtn.addEventListener("click", () => {
			currentIndex =
				currentIndex === totalSlides - 1 ? 0 : currentIndex + 1;
			updateCarousel();
		});
	}

	dots.forEach((dot) => {
		dot.addEventListener("click", (e) => {
			const index = parseInt(
				(e.target as HTMLElement).getAttribute("data-index") || "0",
			);
			currentIndex = index;
			updateCarousel();
		});
	});

	// Initialize
	updateCarousel();
</script>
